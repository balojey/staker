# Story 2.1: Display User Token Balances

**Status:**

- Approved

---

### **Story**
**As a** user,
**I want** to see the balances of my relevant SPL tokens after connecting my wallet,
**so that** I know how much I have available to stake.

---

### **Acceptance Criteria**
1.  After a wallet is connected, a component on the Dashboard/Staking page displays the user's balance for the primary stakable token.
2.  The balance is accurately fetched from the Solana network.
3.  A loading state is displayed while the balance is being fetched.
4.  If the balance is zero, the component displays "0".

---

### **Tasks / Subtasks**
- [x] **Task 1: Create `BalanceDisplay` React Component**
    - [x] Create a new file `src/features/wallet/BalanceDisplay.tsx`.
    - [x] The component should accept a `tokenMintAddress` prop.
    - [x] Initially, the component should display a `shadcn/ui` Skeleton loader.
- [x] **Task 2: Create `useTokenBalance` Custom Hook**
    - [x] Create a new file `src/features/wallet/useTokenBalance.ts`.
    - [x] The hook will use `useConnection` and `useWallet` from the Solana Wallet Adapter.
    - [x] It should contain the logic to find the user's Associated Token Account (ATA) and fetch its balance from the RPC.
    - [x] The hook must manage and return `loading`, `error`, and `balance` states.
- [x] **Task 3: Integrate Hook with Component**
    - [x] Use the `useTokenBalance` hook inside the `BalanceDisplay` component.
    - [x] The component should display the fetched balance, formatted correctly based on the token's decimals.
    - [x] It should correctly display the loading state and "0" for zero or non-existent balances.
- [x] **Task 4: Add Component to the Staking Page**
    - [x] Import and place the `BalanceDisplay` component into the `StakingPage` UI.

---

### **Dev Notes**
* This story requires direct interaction with the Solana JSON-RPC endpoint. All RPC calls should be encapsulated within the services layer as defined in the Architecture Document.
* The `BalanceDisplay` component should be designed to be reusable for any SPL token.
* Refer to the `Token` interface defined in the `Data Models` section of the Architecture Document.

---

### **Testing**
* Unit tests should be created for the `useTokenBalance` hook, mocking the Solana connection and RPC responses.
* Component tests for `BalanceDisplay` should be written using Vitest and React Testing Library to verify that it correctly renders the loading, zero-balance, and populated-balance states.